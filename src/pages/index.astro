---
import Ticket from "../components/Ticket.astro";
import { getData, type Ticket as ITicket } from "../utils";

export const prerender = false;

function filterNotTriaged(ticket: ITicket) {
  return ticket.labelCount === 0 && ticket.assigneeCount === 0;
}

const { issues, pullRequests } = await getData();
---

<style>
  body {
    font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif;
    color: #222;
  }
</style>

<div
  style={{ marginBottom: 20, padding: 10, background: "black", color: "#ccc" }}
>
  ISSUES
</div>
{issues.filter(filterNotTriaged).map((ticket) => <Ticket ticket={ticket} />)}
<div
  style={{
    marginTop: 20,
    marginBottom: 20,
    padding: 10,
    background: "black",
    color: "#ccc",
  }}
>
  PULL REQUESTS
</div>
{
  pullRequests
    .filter(filterNotTriaged)
    .map((ticket) => <Ticket ticket={ticket} />)
}
